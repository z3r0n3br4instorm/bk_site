<!DOCTYPE html>
<html>
    <head>
       
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Online Shopping Store</title>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A==" crossorigin="anonymous" referrerpolicy="no-referrer" />
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
         <link rel="stylesheet" href="style.css">

         <style>
          body {
            
            margin: 0;
            padding: 0;
          }
          .container {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-around;
            padding: 20px;
          }
          .card {
            width: 250px;
            margin: 20px;
            box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2);
            transition: transform 0.3s;
          }
          .card:hover {
            transform: scale(1.05);
          }
          .card img {
            width: 100%;
            height: auto;
          }
          .card-content {
            padding: 15px;
          }
          .btn-container {
            display: flex;
            justify-content: space-between;
            margin-top: 15px;
          }
          .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
          }
          .btn-buy {
            background-color: #1d02a3;
            color: white;
          }
          .btn-cart {
            background-color: #d72417;
            color: white;
          }
          .btn:hover {
            opacity: 0.8;
          }

          /* CSS for button styling */
      .button {
        display: inline-block;
        padding: 10px 20px;
        font-size: 16px;
        cursor: pointer;
        text-align: center;
        text-decoration: none;
        outline: none;
        color: #fff;
        background-color: #007bff;
        border: none;
        border-radius: 5px;
        box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        transition: background-color 0.3s;
      }
    
      .button:hover {
        background-color: #0056b3;
      }
    
      /* Additional styling for multiple buttons */
      .button-secondary {
        background-color: #6c757d;
      }
    
      .button-secondary:hover {
        background-color: #545b62;
      }

      
    body {
        font-family: Arial, sans-serif;
        background-color: #f4f4f4;
        margin: 0;
        padding: 0;
    }
    .container {
        max-width: auto;
        margin: 50px auto;
        background-color: #fff;
        padding: 20px;
        border-radius: 5px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    }
    form {
        margin: 80px;
        max-width: auto;
        flex-direction: column;
    }
    label {
        margin-bottom: 10px;
        font-weight: bold;
    }
    input[type="text"],
    input[type="number"],
    select {
        padding: 8px;
        margin-bottom: 15px;
        border: 1px solid #ccc;
        border-radius: 5px;
    }
    input[type="submit"],
    input[type="button"] {
        padding: 10px;
        background-color: #4caf50;
        color: #fff;
        border: none;
        border-radius: 5px;
        cursor: pointer;
    }
    input[type="submit"]:hover,
    input[type="button"]:hover {
        background-color: #45a049;
    }
    h2 {
        padding-top: 50px;
        padding-left: 50px;
        margin-bottom: 20px;
    }

    h3 {
      padding-top: 10px;
      padding-left: 50px;
      margin-bottom: 10px;
    }
   
        </style>

    </head>

    <body>
        
        <nav>
            <img class="name" src="images/clothing.png"> 
           
            <ul class="sidebar"> 
                <li><a class="active" href="homepage.html">HOME</a> </li>
                <li><a href="men.html">MEN</a> </li>
                <li><a href="women.html">WOMEN</a> </li>
                <li><a href="kids.html">KIDS</a> </li>
            
                <li><a href="offers.html">OFFERS</a> </li>
                <li><a href="nwa.html">NEW ARRIVALS</a> </li>
                <li><a href="login.html">LOGIN|SIGNUP</a> </li>
                <div class="search-container">
                    <input type="text" placeholder="Search...">
                    <button type="submit">Search</button>
                    <button type="submit">add cart</button>
                </div>
            </ul>
                       
        </nav>

        <br>
        <br>
        <br>
    
    
    
    
    

    <br>
    <br>
    <br>
         
    <script>
      $(document).ready(function() {
          function checkGetDataFromTempCart() {
              $.ajax({
                  url: 'dataForCart.php',
                  type: 'GET',
                  dataType: 'json',
                  success: function(response) {
                      document.getElementById('pname').innerText = 'Product name :' + response.pname;
                      document.getElementById('price').innerText='Price :' + response.price;
                      document.getElementById('saveDatapname').value = response.pname;
                      document.getElementById('saveDataPrice').value = response.price;
                      document.getElementById('SessionUserID').value = response.Session_UserID;
                      document.getElementById('RedirectCode').value = response.RedirectCode;
                      console.log(response.RedirectCode);
                      if (response.RedirectCode == 1) {
                        document.getElementById("buybutt").innerText = "Buy Now";
                      } else {
                        document.getElementById("buybutt").innerText = "Add to Cart";
                      }
                  },
                  error: function(xhr, status, error) {
                      // Handle error
                      alert("Fatal Error:"+error);
                      console.error('Error:', error);
                  }
              });
          }
          checkGetDataFromTempCart();
      });
      </script>
    <div class="container">
    <div class="form">
      <h2 id="pname">Loading...</h2>
      <br><br>
      <h3 id="price">Loading...</h3>
        <form id="cartForm">
            <label for="size">Size:</label>
            <select id="size" name="size">
                <option value="small">Small</option>
                <option value="medium">Medium</option>
                <option value="large">Large</option>
            </select>
            <br>
            <label for="color">Color:</label>
            <br>
            <input type="text" id="color" name="color">
            <label for="amount">Amount:</label>
            <input type="number" id="amount" name="amount" min="1">
            <input type="submit" id="buybutt"><br><br>
            <!-- <input type="button" id = "addToCart" value="Add to Cart"><br> -->
            <p id="saveDatapname" type="hidden">
            <p id="saveDataPrice" type="hidden">
            <p id="SessionUserID" type="hidden"></p>
            <p id="RedirectCode" type="hidden"></p>
        </form>
    </div>
    </div>
    </body>
  <script>
  $(document).ready(function() {
      // Function to check if user is logged in
      function checkLoginStatus() {
          $.ajax({
              url: 'AuthCheck.php', // Change this to your actual PHP file path
              type: 'GET',
              dataType: 'json',
              success: function(response) {
                  if (response.loggedIn) {
                      // User is logged in
                      document.getElementById('loginStatus').innerText = 'UserID : ' + response.userID;
                      document.getElementById('userName').innerText="" + response.username;

                  } else {
                      // User is not logged in
                      document.getElementById('loginStatus').innerText = 'You are not logged in.';
                  }
              },
              error: function(xhr, status, error) {
                  // Handle error
                  alert("Fatal Error:"+error);
                  console.error('Error:', error);
              }
          });
      }

      // Function to logout
      function logout() {
          $.ajax({
              url: 'Logout.php',
              type: 'GET',
              success: function() {
                  window.location.replace("index.html");
              },
              error: function(xhr, status, error) {
                  alert("Fatal Error:"+error);
                  console.error('Error:', error);
              }
          });
      }

      //checkLoginStatus();
      $('#logoutButton').click(function() {
          logout();
      });
  });
  </script>
    <script>
        document.getElementById("cartForm").addEventListener("submit", function(event) {
            event.preventDefault();
            var size = document.getElementById("size").value;
            var color = document.getElementById("color").value;
            var amount = document.getElementById("amount").value;
            var price = document.getElementById("saveDataPrice").value;
            var pname = document.getElementById("saveDatapname").value;
            var User = document.getElementById("SessionUserID").value;
            var RedirectCode = document.getElementById("RedirectCode").value;
            
            $.ajax({
                type: "POST",
                url: "cart.php",
                data: {
                    userId: User,
                    size: size,
                    color: color,
                    amount: amount,
                    productId: pname,
                    price: price
                },
                success: function(response, status, xhr) {
                    console.log("Item Added to cart !");
                    alert("Item(s) Added To cart successfully !");
                    if (RedirectCode === '1') {
                      window.location.href = 'payment.html?userId=' + encodeURIComponent(User) + '&userCartStat=notpaynow';
                    } else {
                      window.location.href = 'index.html';
                    }
                    // Redirect user or perform other actions after successful login
                },
                error: function(xhr, status, error) {
                    console.error("An Error Occured " + error);
                    alert("Fatal Error ! Please try again later.");
                    // Handle error scenarios
                }
            });
        });
    </script>
  
         
    <footer>
       
        <div class="footercontainer">
           
                <img class="name" src="images/clothing.png"> 
                <br>
                <p style="font-family: 'Times New Roman', Times, serif;color: aliceblue;">The No 1 Fashion Store</p>

                <p style="font-family:'Times New Roman', Times, serif ;color: aliceblue;">in Sri Lanka</p>
                <div class="socialicons">
                    <a href=""><i class="fa-brands fa-facebook"></i></a>
                    <a href=""><i class="fa-brands fa-instagram"></i></a>
                    <a href=""><i class="fa-brands fa-whatsapp"></i></a>
                    <a href=""><i class="fa-brands fa-youtube"></i></a>
                </div>       
          
            
            <div class="footernav">
                <ul>
                    <li><a href="about.html">About Us</a> </li>
                    <li><a href="contact.html">Contract Us</a> </li>
                    <li><a href="privacy.html">Privacy Policy</a> </li>
                    <li><a href="tms.html">Terms & Conditions</a> </li>
                </ul>
            </div>
    
            
        </div>
        <div class="footerbottm">
            <p style="font-family: 'Times New Roman', Times, serif;">Copyright @ 2024 - Style Vista - All Right Reserved. Concept,Design & Developed by Group No 03, SLIIT Kurunegala.</p>

        </div>
    </footer>


    </body>
</html>